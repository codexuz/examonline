---
import Layout from '../../../layouts/Layout.astro'
import AudioLoader from '../../../components/AudioLoader.astro';
import Speaking from '../../../components/Speaking.astro';
import Home from '../../../components/Home.astro'
import { app } from "@lib/firebase/server";
import { getAuth } from "firebase-admin/auth";
import { getFirestore } from "firebase-admin/firestore";


const auth = getAuth(app);
const db = getFirestore(app)

/* Check current session */
if (!Astro.cookies.has("session")) {
  return Astro.redirect("/signin");
}
const sessionCookie = Astro.cookies.get("session").value;
const decodedCookie = await auth.verifySessionCookie(sessionCookie);
const user = await auth.getUser(decodedCookie.uid);

if (!user) {
  return Astro.redirect("/signin");
}

const userRef = db.collection("users").doc(user.uid)
const userSnapshot = await userRef.get();
const userData = userSnapshot.data();

const {tariff, telegram, telegramName, status} = userData

if(status ==="unpaid" || status ===""){
  return Astro.redirect("/price");	
}

---

<Layout title="Speaking">
    <AudioLoader/>
	<Home/>
     <Speaking test="Test 12. Animals & Zoo" />

     <audio src="/mock-tests/test12/1.mp3" id="audio1"></audio>
     <audio src="/mock-tests/test12/2.mp3" id="audio2"></audio>
     <audio src="/mock-tests/test12/3.mp3" id="audio3"></audio>
     <audio src="/mock-tests/test12/4.mp3" id="audio4"></audio>
     <audio src="/mock-tests/test12/5.mp3" id="audio5"></audio>
     <audio src="/mock-tests/test12/6.mp3" id="audio6"></audio>
     <audio src="/mock-tests/test12/part2/intro.mp3" id="audio7"></audio>
     <audio src="/mock-tests/test12/part2/1.mp3" id="audio8"></audio>
	 <audio src="/mock-tests/test12/part3/intro.mp3" id="audio9"></audio>
	 <audio src="/mock-tests/test12/part3/1.mp3" id="audio10"></audio>
	 <audio src="/mock-tests/test12/part3/2.mp3" id="audio11"></audio>
	 <audio src="/mock-tests/test12/part3/3.mp3" id="audio12"></audio>
	 <audio src="/mock-tests/test12/part3/4.mp3" id="audio13"></audio>
	 <audio src="/mock-tests/test12/part3/5.mp3" id="audio14"></audio>
	 <audio src="/mock-tests/test12/part3/end.mp3" id="audio15"></audio>
                        
</Layout>

<script is:inline>

var q=[
   'Do you have a pet?',
   'What types of animals do you think make the best pets?',
   'Why do people have pets?',
   'What seasons do you have in your country?',
   'Which is your favourite season?',
   'How often do you ride a bicycle?',
   '<p><b>Describe a wild animal that lives in your country.</b></p><p>You should say:</p><ul><li>what animal it is</li><li>where it lives</li><li>how people feel about this animal</li><li>and explain if you think there will be more or fewer of this animal in the wild in the future and why.</li></ul><br><textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Izoh yozish uchun"></textarea>',
   'What is the purpose of having zoos?',
   'What is your opinion about animals being kept in zoos?',
   'How do you think zoos could be improved?',
   'Do you think is it important to conserve the worldâ€™s animal species?',
   'Do you think money should be spent on protecting wild animals?'
	]

</script>

<script src="../../../scripts/quiz.js"></script>  
